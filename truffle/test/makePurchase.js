var Web3 = require("web3");
var BN = require("bignumber.js");

var web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
var parsedJSON = require('./build/contract/dgp.json');
var byteCode = '0x60606040526608e1bc9bf04000600355670de0b6b3a7640000600455341561002657600080fd5b5b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b611bb7806100786000396000f3006060604052361561013c576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630decead5146101925780631a7015d4146101bb57806339c8aae8146101fd578063411c91e8146102265780635e4a1d361461026857806361eed2a9146102b5578063647c75e21461031e578063715851a01461036b57806372f4fdbf146103b85780639089f616146103db578063928171841461041457806399eb925d1461044d578063a76f75611461048f578063aab1df01146104dc578063b0a1c1c414610505578063b11432691461052e578063b304b2e114610579578063c740cd50146105a2578063d4c2c15014610603578063dec8f52e1461062c578063e118fba214610679578063e541c71e1461068e578063ef3bec3d146106b7578063f851a440146106f9575b5b600034141561014b57600080fd5b34600760003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b005b341561019d57600080fd5b6101a561074e565b6040518082815260200191505060405180910390f35b34156101c657600080fd5b6101fb600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610754565b005b341561020857600080fd5b61021061095c565b6040518082815260200191505060405180910390f35b341561023157600080fd5b610266600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610961565b005b341561027357600080fd5b61029f600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610ad2565b6040518082815260200191505060405180910390f35b34156102c057600080fd5b6102ec600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610bbc565b604051808681526020018581526020018481526020018381526020018281526020019550505050505060405180910390f35b341561032957600080fd5b610355600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610bf2565b6040518082815260200191505060405180910390f35b341561037657600080fd5b6103a2600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610c0a565b6040518082815260200191505060405180910390f35b34156103c357600080fd5b6103d96004808035906020019091905050610cb0565b005b34156103e657600080fd5b610412600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610d57565b005b341561041f57600080fd5b61044b600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610fb0565b005b341561045857600080fd5b61048d600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611108565b005b341561049a57600080fd5b6104c6600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061127a565b6040518082815260200191505060405180910390f35b34156104e757600080fd5b6104ef611292565b6040518082815260200191505060405180910390f35b341561051057600080fd5b610518611298565b6040518082815260200191505060405180910390f35b341561053957600080fd5b610577600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190803590602001909190505061129e565b005b341561058457600080fd5b61058c611521565b6040518082815260200191505060405180910390f35b34156105ad57600080fd5b610601600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611527565b005b341561060e57600080fd5b61061661173c565b6040518082815260200191505060405180910390f35b341561063757600080fd5b610663600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611742565b6040518082815260200191505060405180910390f35b341561068457600080fd5b61068c611844565b005b341561069957600080fd5b6106a161198c565b6040518082815260200191505060405180910390f35b34156106c257600080fd5b6106f7600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611992565b005b341561070457600080fd5b61070c611b04565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b60045481565b600080600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015414156107a557600080fd5b6107ae33611742565b905081600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201548201101561080157600080fd5b80600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030160008282540192505081905550818103600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002016000828254019250508190555081600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f22e3ae3a20c49dce14046235895c7a3ffc0a6a5f3577c370177ad45fa619485d846040518082815260200191505060405180910390a35b5b505050565b600781565b6000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414156109ae57600080fd5b80600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156109fa57600080fd5b80600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201600082825401925050819055503373ffffffffffffffffffffffffffffffffffffffff167ff40cc8c1a1d17359049ba500cfc894596a692cffc9d03943cd92ec2e159cf6ae8383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a25b5b5050565b600080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600401541415610b2357600080fd5b600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030154610b6f83611742565b600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060040154030390505b919050565b60066020528060005260406000206000915090508060000154908060010154908060020154908060030154908060040154905085565b60076020528060005260406000206000915090505481565b600080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600401541415610c5b57600080fd5b600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020154610ca783611742565b0190505b919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610d0b57600080fd5b806001600082825401925050819055507f4ad6d3cd6f9acbf734536f9812be14aded33cc8c4ae2cfbf3ff9a0a4acb33748816040518082815260200191505060405180910390a15b5b50565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610db457600080fd5b6000600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600401541415610e0457600080fd5b600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030154600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060040154600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020154010390508060026000828254039250508190555060016008600082825403925050819055508173ffffffffffffffffffffffffffffffffffffffff167f1af8aed7817903c32014f4e178a0a43fa985bdcbfd9255069bb27cfd097406b6826040518082815260200191505060405180910390a2600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600080820160009055600182016000905560028201600090556003820160009055600482016000905550505b5b5050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561100d57600080fd5b600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555080600160008282540392505081905550806002600082825403925050819055508173ffffffffffffffffffffffffffffffffffffffff167fe6c82503aaaa3db78b70f183901ae8668918f895b3982b2c851cf2ffe0c6c639826040518082815260200191505060405180910390a25b5b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561116357600080fd5b6000600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206004015414156111b357600080fd5b600154816002540111156111c657600080fd5b8060026000828254019250508190555080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff167f460e6187c811397844950a074cd5c0eee99a665e28e3e390d1d1cd6e8834e04b826040518082815260200191505060405180910390a25b5b5050565b60056020528060005260406000206000915090505481565b611b5881565b60015481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156112f957600080fd5b60008211151561130857600080fd5b6001546002548301111561131b57600080fd5b6000600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060040154111561136b57600080fd5b816002600082825401925050819055506000600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002018190555081600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206004018190555060008114611418578061141a565b425b600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001819055506000600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001018190555060016008600082825401925050819055506114c283611b29565b600082111561151a578273ffffffffffffffffffffffffffffffffffffffff167f1cce2e096ae6876594b2571ec18879ef89e1870b70d1498176e1e1ac55c19036836040518082815260200191505060405180910390a25b5b5b505050565b60025481565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561158457600080fd5b61158d83611742565b905081600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020154820110156115e057600080fd5b80600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030160008282540192505081905550818103600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206002016000828254019250508190555081600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508373ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f22e3ae3a20c49dce14046235895c7a3ffc0a6a5f3577c370177ad45fa619485d846040518082815260200191505060405180910390a35b5b50505050565b60035481565b600080600080600660008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060040154141561179657600080fd5b600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001544203915062015180600702828115156117ee57fe5b049050600660008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030154611b5882020392505b5050919050565b600080600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054141561189257600080fd5b600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506000600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555080600160008282540392505081905550806002600082825403925050819055503373ffffffffffffffffffffffffffffffffffffffff167fe6c82503aaaa3db78b70f183901ae8668918f895b3982b2c851cf2ffe0c6c639826040518082815260200191505060405180910390a25b5b50565b60085481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156119ed57600080fd5b6000600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600401541415611a3d57600080fd5b60015481600254011115611a5057600080fd5b8060026000828254019250508190555080600660008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600401600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff167f1cce2e096ae6876594b2571ec18879ef89e1870b70d1498176e1e1ac55c19036826040518082815260200191505060405180910390a25b5b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60006003548273ffffffffffffffffffffffffffffffffffffffff16311015611b86578173ffffffffffffffffffffffffffffffffffffffff166108fc6004549081150290604051600060405180830381858888f1935050505090505b5b50505600a165627a7a7230582073005d8e0bc53c9ce2fcc095f10a7b0334992f9db88954933fa6fc8f6662a05e0029';

var browser_dgpv2_sol_dgpContract = new web3.eth.Contract(
  [{"constant":true,"inputs":[],"name":"clientTopOffAmt","outputs":[{"name":"","type":"uint256"}],
   "payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_vendorAddress","type":"address"},
   {"name":"amount","type":"uint256"}],"name":"makePurchase","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"redemptionFrequency","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_clientAddress","type":"address"},{"name":"amount","type":"uint256"}],"name":"refundClient","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_clientAddress","type":"address"}],"name":"getSavingsBalance","outputs":[{"name":"savingsBalance","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"clients","outputs":[{"name":"startTime","type":"uint256"},{"name":"lastRedemptionBlock","type":"uint256"},{"name":"checkingBalance","type":"uint256"},{"name":"depositedEndowments","type":"uint256"},{"name":"endowmentTotal","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"supporters","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_clientAddress","type":"address"}],"name":"getCheckingBalance","outputs":[{"name":"checkingBalance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_donationAmt","type":"uint256"}],"name":"registerDonation","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_clientAddress","type":"address"}],"name":"removeClient","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_vendorAddress","type":"address"}],"name":"redeemPurchasesForVendor","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_clientAddress","type":"address"},{"name":"_amount","type":"uint256"}],"name":"depositChecking","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"vendorBalances","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"redemptionAmt","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"accountBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_clientAddress","type":"address"},{"name":"_endowmentTotal","type":"uint256"},{"name":"_startTime","type":"uint256"}],"name":"registerClient","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"allocated","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_vendorAddress","type":"address"},{"name":"_clientAddress","type":"address"},{"name":"amount","type":"uint256"}],"name":"makePurchaseForClient","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"clientTopOffLevel","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_clientAddress","type":"address"}],"name":"getVested","outputs":[{"name":"vested","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"redeemPurchases","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"clientCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_clientAddress","type":"address"},{"name":"_amount","type":"uint256"}],"name":"endow","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"admin","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_value","type":"uint256"}],"name":"Donation","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"CheckingDeposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Endowment","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_removed","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"RemoveClient","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_client","type":"address"},{"indexed":true,"name":"_vendor","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Purchase","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_vendor","type":"address"},{"indexed":false,"name":"_client","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Refund","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_vendor","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Redemption","type":"event"}
  ]);

var deploy = function(from) {
  return browser_dgpv2_sol_dgpContract.deploy(
   {
     from: from,
     data: byteCode
   })
  .send({ from: from,
          gas: 4000000 })
  .on('transactionHash', function(transactionHash){ 
      console.log(transactionHash); })
  .on('receipt', function(receipt){
      console.log(receipt.gasUsed)});
};

var accounts;
web3.eth.getAccounts().then(a=>{
  accounts = a;
  return a;
})
.then(a=>{
  return deploy(accounts[0]);
})
.then(i=>{
      console.log(i.options.address);
});
    
